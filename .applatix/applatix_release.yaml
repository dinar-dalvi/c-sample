---
type: service_template
subtype: workflow
name: Applatix Release
description: This is the workflow for releasing all applatix components.
inputs:
  parameters:
    commit:
      default: "%%session.commit%%"
    repo:
      default: "%%session.repo%%"
    namespace:
      default: axsys
    required_approvals:
      default: "pratul@applatix.com"
    optional_approvals:
      default: " "
    number_of_optional_approvals_needed:
      default: "0"
    timeout_in_minutes:
      default: "1440"
steps:
  - checkout:
      template: axscm-checkout
  - 
    sass-test:
      template: saas-unit-test-step
      parameters:
        checkout: "%%step.checkout%%"
    devops-test:
      template: devops-unit-test-step
      parameters:
        checkout: "%%step.checkout%%"
  - approval:
      template: axapproval
  - 
    platform-build:
      template: platform-release-step
      parameters:
        checkout: "%%step.checkout%%"
    devops-build:
      template: devops-release-step
      parameters:
        checkout: "%%step.checkout%%"
    saas-build:
      template: saas-release-step
      parameters:
        checkout: "%%step.checkout%%"